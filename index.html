<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>PhÃ¢n tÃ­ch cáº§u TÃ i Xá»‰u</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      padding: 15px;
    }
    button {
      padding: 10px 14px;
      margin: 5px 0;
      font-size: 16px;
      cursor: pointer;
    }
    input {
      padding: 8px;
      font-size: 16px;
      width: 100%;
      margin-bottom: 10px;
    }
    #output {
      margin-top: 15px;
      padding: 10px;
      background: #1e1e1e;
      border-radius: 8px;
    }
  </style>
</head>

<body>

  <h2>ğŸ² PhÃ¢n tÃ­ch cáº§u TÃ i Xá»‰u</h2>

  <!-- NHáº C -->
  <div id="musicStatus">ğŸ”‡ Nháº¡c: Táº¯t</div>
  <button onclick="toggleMusic()">ğŸµ Báº­t / Táº¯t nháº¡c</button>

  <hr>

  <!-- NHáº¬P Cáº¦U -->
  <p>Nháº­p lá»‹ch sá»­ (T = TÃ i, X = Xá»‰u) â€” vÃ­ dá»¥: <b>T,X,T,T,X</b></p>
  <input id="history" placeholder="T,X,T,X,X,T">
  <button onclick="analyze()">ğŸ“Š PhÃ¢n tÃ­ch</button>

  <div id="output"></div>

  <script>
    // ====== NHáº C Ná»€N ======
    let music = new Audio(
      "https://cdn.pixabay.com/audio/2022/03/15/audio_45b46c1c18.mp3"
    );
    music.loop = true;
    music.volume = 0.5;

    function toggleMusic() {
      if (music.paused) {
        music.play().catch(() => {});
        document.getElementById("musicStatus").innerText = "ğŸ”Š Nháº¡c: Äang báº­t";
      } else {
        music.pause();
        document.getElementById("musicStatus").innerText = "ğŸ”‡ Nháº¡c: Táº¯t";
      }
    }

    // ====== PHÃ‚N TÃCH Cáº¦U ======
    function analyze() {
      let raw = document.getElementById("history").value.toUpperCase();
      let arr = raw.split(",").map(x => x.trim()).filter(x => x === "T" || x === "X");

      if (arr.length < 3) {
        output("âŒ Nháº­p Ã­t nháº¥t 3 vÃ¡n (T hoáº·c X)");
        return;
      }

      let last = arr[arr.length - 1];
      let tai = 0, xiu = 0;

      for (let i = 1; i < arr.length; i++) {
        if (arr[i] === arr[i - 1]) {
          arr[i] === "T" ? tai++ : xiu++;
        }
      }

      let predict = tai > xiu ? "TÃ€I" : "Xá»ˆU";
      let confidence = Math.min(90, 55 + Math.abs(tai - xiu) * 5);

      let html = `
        ğŸ§  <b>PhÃ¢n tÃ­ch cáº§u:</b><br><br>
        â€¢ VÃ¡n gáº§n nháº¥t: <b>${last === "T" ? "TÃ€I" : "Xá»ˆU"}</b><br>
        â€¢ Cáº§u bá»‡t TÃ i: ${tai}<br>
        â€¢ Cáº§u bá»‡t Xá»‰u: ${xiu}<br><br>

        ğŸ¯ <b>Gá»£i Ã½ vÃ¡n sau:</b><br>
        <span style="color:gold;font-size:20px;"><b>${predict}</b></span><br>
        ğŸ“ˆ Äá»™ tin cáº­y: <b>${confidence}%</b>
      `;

      document.getElementById("output").innerHTML = html;
    }

    function output(txt) {
      document.getElementById("output").innerText = txt;
    }
  </script>

</body>
</html>

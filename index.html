<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ph√¢n t√≠ch c·∫ßu T√†i X·ªâu</title>

<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:-apple-system,BlinkMacSystemFont;
  display:flex;
  justify-content:center;
}
.app{
  width:92%;
  max-width:420px;
  margin-top:20px;
  background:#0b0b0b;
  border-radius:20px;
  padding:20px;
  box-shadow:0 0 25px rgba(255,215,0,.35);
}
h1{text-align:center;color:gold;}
input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  font-size:16px;
}
.btn{
  width:100%;
  padding:14px;
  margin-top:14px;
  border:none;
  border-radius:14px;
  background:linear-gradient(90deg,gold,orange);
  font-size:18px;
  font-weight:bold;
}
.card{
  margin-top:16px;
  background:#111;
  padding:14px;
  border-radius:14px;
}
</style>
</head>

<body>
<div class="app">
<h1>üìä Ph√¢n t√≠ch c·∫ßu</h1>

<input id="input" placeholder="VD: T X T T X T T X">

<button class="btn" onclick="analyze()">PH√ÇN T√çCH</button>

<div class="card" id="output">Ch∆∞a c√≥ d·ªØ li·ªáu</div>
</div>

<script>
function analyze(){
  let raw = document.getElementById("input").value.toUpperCase();
  let arr = raw.replace(/[^TX]/g,"").split("");
  let n = arr.length;

  if(n < 6){
    output("‚ö†Ô∏è C·∫ßn √≠t nh·∫•t 6 v√°n ƒë·ªÉ ph√¢n t√≠ch c·∫ßu n√¢ng cao");
    return;
  }

  let scores = [];
  let last = arr[n-1];

  // 1Ô∏è‚É£ B·ªÜT
  let streak = 1;
  for(let i=n-1;i>0;i--){
    if(arr[i]===arr[i-1]) streak++;
    else break;
  }
  if(streak>=3){
    scores.push({
      name:`üî• B·ªát ${arr[n-1]==="T"?"T√ÄI":"X·ªàU"} (${streak})`,
      predict:last,
      score:70 + streak*3
    });
  }

  // 2Ô∏è‚É£ ƒê·∫¢O 1‚Äì1
  let isAlt=true;
  for(let i=n-1;i>n-6;i--){
    if(arr[i]===arr[i-1]) isAlt=false;
  }
  if(isAlt){
    scores.push({
      name:"‚ö° C·∫ßu ƒë·∫£o 1‚Äì1",
      predict:last==="T"?"X·ªàU":"T√ÄI",
      score:72
    });
  }

  // 3Ô∏è‚É£ C·∫¶U 2‚Äì1 / 3‚Äì1
  let seq = arr.slice(-6).join("");
  if(/(TTX){1,}/.test(seq) || /(XXT){1,}/.test(seq)){
    scores.push({
      name:"üîÅ C·∫ßu 2‚Äì1",
      predict:last==="T"?"X·ªàU":"T√ÄI",
      score:74
    });
  }
  if(/(TTTX){1,}/.test(seq) || /(XXXT){1,}/.test(seq)){
    scores.push({
      name:"üîÅ C·∫ßu 3‚Äì1",
      predict:last==="T"?"X·ªàU":"T√ÄI",
      score:78
    });
  }

  // 4Ô∏è‚É£ TH·ªêNG K√ä NGHI√äNG
  let t = arr.filter(x=>x==="T").length;
  let x = n - t;
  scores.push({
    name:"üìä Th·ªëng k√™ nghi√™ng",
    predict: t>x ? "T√ÄI" : "X·ªàU",
    score: 60 + Math.abs(t-x)*2
  });

  // CH·ªåN C·∫¶U M·∫†NH NH·∫§T
  scores.sort((a,b)=>b.score-a.score);
  let best = scores[0];

  let html = `
  üß† C·∫ßu m·∫°nh nh·∫•t:<br>
  <b>${best.name}</b><br><br>
  üîÆ G·ª£i √Ω v√°n sau:
  <b style="color:gold">${best.predict}</b><br>
  üìà ƒê·ªô tin c·∫≠y: <b>${best.score}%</b><br><br>
  <hr>
  <b>So s√°nh c·∫ßu:</b><br>
  `;

  scores.forEach(s=>{
    html += `‚Ä¢ ${s.name}: ${s.predict} (${s.score}%)<br>`;
  });

  document.getElementById("output").innerHTML = html;
}

function output(txt){
  document.getElementById("output").innerText = txt;
}
</script>
</body>
</html>
